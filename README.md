# Bot Server - AI èŠå¤©æœºå™¨äººåç«¯æœåŠ¡

å‰ç«¯ä»“åº“æ˜¯æˆ‘çš„ä»“åº“ä¸‹çš„ bot-app é¡¹ç›®ã€‚  


è¿™æ˜¯ä¸€ä¸ªåŸºäº Node.js å’Œ TypeScript æ„å»ºçš„ã€åŠŸèƒ½å¼ºå¤§çš„ AI èŠå¤©æœºå™¨äººåç«¯æœåŠ¡ã€‚å®ƒä¸ä»…èƒ½è¿›è¡Œå¸¸è§„çš„è¯­è¨€å¯¹è¯ï¼Œæ›´é€šè¿‡å†…ç½®çš„ **MCP (Model-Context-Protocol)** æ¨¡å—ï¼Œèµ‹äºˆäº† AI Agent è°ƒç”¨å¤–éƒ¨å·¥å…·çš„èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿå®Œæˆæ›´å¤æ‚çš„ä»»åŠ¡ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **å…ˆè¿›çš„ Agent æ¶æ„**: å†…ç½® MCP æ¨¡å—ï¼ŒåŸºäº **ReAct (Reasoning and Acting)** è®¾è®¡æ¨¡å¼ï¼Œè®© AI èƒ½å¤Ÿæ€è€ƒã€è¡ŒåŠ¨ã€è§‚å¯Ÿï¼Œå¹¶è°ƒç”¨å·¥å…·ã€‚
- **çµæ´»çš„å·¥å…·æ‰©å±•**: åŸºäº**ä¾èµ–æ³¨å…¥**å’Œ**æ§åˆ¶åè½¬ (IoC)**ï¼Œå¯ä»¥è½»æ¾åœ°åœ¨åº”ç”¨å±‚å®šä¹‰å’Œæ³¨å†Œæ–°çš„å·¥å…·ä¸æœåŠ¡ï¼Œå¹¶æ³¨å…¥åˆ° `mcp` æ¨¡å—ä¸­ï¼Œå®ç°äº†çœŸæ­£çš„è§£è€¦ã€‚
- **æµå¼å“åº”**: API ç«¯ç‚¹å®Œå…¨æ”¯æŒæµå¼è¾“å‡ºï¼Œæä¾›æµç•…çš„å®æ—¶èŠå¤©ä½“éªŒã€‚
- **åˆ†å±‚ä¸è§£è€¦**:æ¸…æ™°çš„é¡¹ç›®ç»“æ„ (`Route` -> `Controller` -> `Service`)ï¼Œä»¥åŠé«˜åº¦å†…èšçš„ `mcp` æ¨¡å—ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚
- **ç°ä»£åŒ– TypeScript**: å®Œå…¨åŸºäº TypeScript å’Œ ES Modulesï¼Œæä¾›å¼ºå¤§çš„ç±»å‹å®‰å…¨å’Œç°ä»£åŒ–çš„å¼€å‘ä½“éªŒã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: Node.js, Express
- **è¯­è¨€**: TypeScript
- **æ ¸å¿ƒ AI**: LangChain.js
- **Agent æ¡†æ¶**: è‡ªç ”çš„ MCP (Model-Context-Protocol)
- **å¼€å‘å·¥å…·**: ESLint (ä»£ç è§„èŒƒ), `tsx` (TypeScript å®æ—¶æ‰§è¡Œ)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Node.js (ç‰ˆæœ¬ `>=18.0.0`)
- pnpm (æ¨è) æˆ– npm/yarn

### 2. å®‰è£…ä¾èµ–

å…‹éš†é¡¹ç›®åï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š

```bash
pnpm install
# æˆ–è€…
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `.env` æ–‡ä»¶ï¼Œå¹¶å¡«å…¥å¿…è¦çš„é…ç½®ã€‚è¿™æ˜¯å¯åŠ¨æœåŠ¡çš„å…³é”®ã€‚

```env
# .env æ–‡ä»¶ç¤ºä¾‹

# ä½ çš„è¯­è¨€æ¨¡å‹ API Key (å¿…éœ€)
LLM_API_KEY="your_deepseek_or_openai_api_key"

# (å¯é€‰) ä½ çš„è¯­è¨€æ¨¡å‹ API åœ°å€
LLM_BASE_URL="https://api.deepseek.com/v1"

# (å¯é€‰) ä½ æƒ³ä½¿ç”¨çš„è¯­è¨€æ¨¡å‹åç§°
LLM_MODEL="deepseek-chat"
```

### 4. å¯åŠ¨æœåŠ¡

**å¼€å‘æ¨¡å¼** (å¸¦çƒ­é‡è½½):

```bash
pnpm dev
```

**ç”Ÿäº§æ¨¡å¼**:

```bash
# 1. ç¼–è¯‘ TypeScript
pnpm build

# 2. å¯åŠ¨æœåŠ¡
pnpm start
```

æœåŠ¡å¯åŠ¨åï¼Œé»˜è®¤ç›‘å¬åœ¨ `http://localhost:3000` (ç«¯å£å¯åœ¨ `src/config/index.ts` ä¸­ä¿®æ”¹)ã€‚

## ğŸ“œ å¯ç”¨çš„ NPM è„šæœ¬

- `pnpm dev`: ä»¥å¼€å‘æ¨¡å¼å¯åŠ¨æœåŠ¡ï¼Œæ–‡ä»¶å˜æ›´æ—¶è‡ªåŠ¨é‡å¯ã€‚
- `pnpm build`: å°† TypeScript ç¼–è¯‘ä¸º JavaScript åˆ° `dist` ç›®å½•ã€‚
- `pnpm start`: è¿è¡Œç¼–è¯‘åçš„ç”Ÿäº§ç¯å¢ƒä»£ç ã€‚
- `pnpm lint`: æ£€æŸ¥ä»£ç é£æ ¼ã€‚

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/         # åº”ç”¨å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ controllers/    # Express æ§åˆ¶å™¨ï¼Œå¤„ç†HTTPè¯·æ±‚
â”‚   â”œâ”€â”€ middlewares/    # Express ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ mcp/            # æ ¸å¿ƒçš„ MCP Agent æ¨¡å— (å¯ç‹¬ç«‹)
â”‚   â”œâ”€â”€ routes/         # API è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚
â”‚   â”œâ”€â”€ servers/        # [æ–°å¢] åº”ç”¨å±‚çš„ MCP æœåŠ¡å™¨å®šä¹‰
â”‚   â”œâ”€â”€ utils/          # åº”ç”¨å…¨å±€çš„å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.ts        # åº”ç”¨ä¸»å…¥å£
â”œâ”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
â””â”€â”€ package.json        # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
```
