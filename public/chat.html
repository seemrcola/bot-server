<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bot Server 对话测试</title>
    
    <!-- 外部依赖 -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 自定义样式 -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/markdown.css">
  </head>
  <body class="min-h-screen bg-slate-50">
    <!-- 主容器 -->
    <div class="max-w-6xl mx-auto p-6">
      <!-- 头部 -->
      <header class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-3">
          <div class="h-9 w-9 rounded-full bg-white ring-1 ring-slate-300 text-slate-900 grid place-items-center text-sm font-semibold">AI</div>
          <h1 class="text-lg font-medium text-slate-900 tracking-tight">Bot Server 对话测试</h1>
          <span id="statePill" class="ml-2 inline-flex items-center rounded-full border border-slate-200 bg-slate-100 px-2.5 py-0.5 text-xs font-medium text-slate-700">空闲</span>
        </div>
        <div class="flex items-center gap-4">
          <button id="clearBtn" class="px-3 py-1.5 text-xs rounded-md border border-slate-200 text-slate-700 hover:bg-slate-100">清空对话</button>
          <div class="flex items-center gap-2">
            <label class="text-xs text-slate-500">Base URL</label>
            <input id="baseUrl" class="px-3 py-2 rounded-lg bg-white border border-slate-300 text-slate-700 text-sm w-[280px] focus:outline-none focus:ring-2 focus:ring-slate-200" value="http://localhost:3000" />
          </div>
        </div>
      </header>

      <!-- 主内容区 -->
      <main class="grid grid-cols-12 gap-6">
        <!-- 聊天区域 -->
        <section class="col-span-12 lg:col-span-8 bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
          <div class="px-4 py-3 border-b border-slate-100 flex items-center justify-between bg-slate-50/60">
            <div>
              <div class="text-sm font-medium text-slate-900 tracking-tight">对话</div>
              <div class="text-xs text-slate-500">支持多轮对话 / 工具调用</div>
            </div>
            <div class="flex items-center gap-2">
              <button data-preset="hello" class="preset-btn px-2.5 py-1.5 text-xs rounded-md border border-slate-200 text-slate-700 hover:bg-slate-100">普通对话</button>
              <button data-preset="tool" class="preset-btn px-2.5 py-1.5 text-xs rounded-md border border-slate-200 text-slate-700 hover:bg-slate-100">工具调用</button>
              <button data-preset="webcatcher" class="preset-btn px-2.5 py-1.5 text-xs rounded-md border border-slate-200 text-slate-700 hover:bg-slate-100">网页抓取</button>
            </div>
          </div>

          <div id="chatList" class="h-[50vh] overflow-y-auto p-4 space-y-4 scrollbar-thin bg-white">
            <!-- 消息将在这里显示 -->
          </div>

          <div class="border-t border-slate-100 p-4">
            <div class="flex items-end gap-2">
              <textarea id="userInput" class="flex-1 px-3 py-2 rounded-lg bg-white border border-slate-300 text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200" rows="2" placeholder="输入你的问题..."></textarea>
              <button id="sendBtn" class="px-4 py-2 rounded-lg bg-slate-900 text-white hover:bg-slate-800">发送</button>
            </div>
            <div class="mt-2 text-xs text-slate-500">提示：支持多轮对话，可以说"再查一次"、"重新查询"等上下文指令</div>
          </div>
        </section>

        <!-- ReAct步骤面板 -->
        <aside class="col-span-12 lg:col-span-4 bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
          <div class="px-4 pt-3 border-b border-slate-100 bg-slate-50/60">
            <div class="flex items-center">
              <button id="tabSteps" class="px-3 py-2 text-xs rounded-t-md border border-b-0 border-slate-200 bg-white text-slate-900">ReAct 步骤</button>
              <button id="tabMeta" class="ml-2 px-3 py-2 text-xs rounded-t-md border border-slate-200 bg-transparent text-slate-600">Agents / Tools</button>
              <div class="flex-1"></div>
            </div>
          </div>
          <div id="panelSteps" class="h-[60vh] overflow-y-auto overflow-x-hidden p-4 space-y-2 text-xs font-mono text-slate-800 bg-white scrollbar-thin break-words"></div>
          <div id="panelMeta" class="hidden h-[60vh] overflow-y-auto overflow-x-hidden p-4 space-y-2 text-xs font-mono text-slate-800 bg-white scrollbar-thin break-words">
            <div class="mb-2 flex items-center gap-2">
              <button id="btnListAgents" class="px-2.5 py-1.5 text-xs rounded-md border border-slate-200 text-slate-700 hover:bg-slate-100">查看 Agents</button>
              <button id="btnListTools" class="px-2.5 py-1.5 text-xs rounded-md border border-slate-200 text-slate-700 hover:bg-slate-100">查看 Tools</button>
            </div>
            <div id="metaContent" class="space-y-2"></div>
          </div>
        </aside>
      </main>
    </div>

    <!-- 消息模板 -->
    <div id="templates" style="display: none;"></div>

    <!-- 加载外部模块 -->
    <script type="module" src="js/main.js"></script>
  </body>
</html>


